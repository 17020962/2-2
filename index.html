<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>baitaptuan1</title>
	<style>
		body{
			width: 500px;
			height: auto;
			margin: 0px;
			padding-left: 444px;
		}

		.header{
			background: red;
			margin-bottom: 0px;
		}
		.header h1{
			color: white;
			text-align: center;
		}
		.header .inadd input{
			margin-bottom: 10px;
			border: none;
			font-size: 30px;
			width: 71%;
		}
		.header .inadd span{
			border: none ;
			font-size: 33px;
			background-color:#5d6968;
			color: black;
			padding-bottom: 1px;
		}

		.header .inadd span:hover{
			background-color: grey;
			cursor: pointer;
		}

		.header form{
			text-align: center;
		}

		.main ul{
			padding-left: 0px;
			margin: 0px;
		}
		.main ul li {
			list-style: none;
			font-size: 16px;
			height: 22px;
			width: 450px;
			padding: 12px 10px 10px 40px;
			background-color: #ece1e1; 
		}

		.main ul li:hover{
			background-color: #b9a0a0;
			position: relative;
		}

		.main ul li{
			float: left;
			clear: left;
		}

		.main ul li .close{
			float: right;
			clear: right;
			top: 0px;
			right: 0px;

		}
		.main ul li:hover .close{
			background: red;
			position: absolute;
			padding: 13px;
		}
	</style>
</head>
<body>
	<div id="myDIV" class = "header">
		<h1>Danh sách học sinh trong lớp</h1>
		<form action="" class="inadd">
			<input id="myInput" type="text" placeholder="Title..." /><span id="add" class="inadd">ADD</span>
		</form>
	</div>
	<div class="main">
		<ul id="myUL">
			
		</ul>
		
	</div>
	<script>
		var span = document.getElementById('add');
		var input = document.getElementById('myInput');
		var list = document.getElementById('myUL');

function removeTodoFromStorage(index) {
    var todos = getTodosFromStorage();

    todos.splice(index, 1 );

    saveTodosToStorage(todos);
}
function addTodoToLocalStorage(text) {
    var todos = getTodosFromStorage();

    todos.push({//chuyển giá trị của todos từ string sang obj 
        text: text,
        completed: false
    });

    saveTodosToStorage(todos);//lưu giá trị vừa chuyển sang obj vào todos
}
function handleRemoveTodo(target) {
    var todo = target.parentElement;

    var id = todo.id;

    removeTodoFromStorage(id);
    render();
}

function handcomplete(target){
    var todos = getTodosFromStorage();

    var id = target.id;
    var todo = todos[id];
    todo.completed = !todo.completed;

    saveTodosToStorage(todos);
}

function onClickTodo(event) {
    var target = event.target;

    var tag = target.tagName;

    if(input&&tag === 'LI'){

        handcomplete(target);

	}

    if (tag === 'SPAN') {
        handleRemoveTodo(target);
    }


    render();
}

function renderTodoToHTML(text, completed,i) {
    var todo = document.createElement('li');
    todo.innerHTML = text + '<span class="close">x</span>';
    todo.id = i;
    if (completed) {
        todo.className = "completed";
    }
    todo.addEventListener('click', onClickTodo);

    list.appendChild(todo);
}

function getTodosFromStorage() {
    var str = localStorage.getItem('todos');
        return JSON.parse(str);
}

function saveTodosToStorage(todos) {
    var str = JSON.stringify(todos);
    return localStorage.setItem('todos', str);
}

function clearList() {
    list.innerHTML = '';
}

function renderTodosList() {
    var todos = getTodosFromStorage();

    for (var i = 0; i < todos.length; i++) {
        var todo = todos[i];

        renderTodoToHTML(todo.text, todo.completed,i);
    }
}

function render() {
    clearList();
    renderTodosList();
}

function emptyInput() {
   input.value = '';
}

span.addEventListener('click', function () {
    var text = input.value;
    addTodoToLocalStorage(text);
    render();
    emptyInput();
});
render();
			
	</script>

</body>
</html>